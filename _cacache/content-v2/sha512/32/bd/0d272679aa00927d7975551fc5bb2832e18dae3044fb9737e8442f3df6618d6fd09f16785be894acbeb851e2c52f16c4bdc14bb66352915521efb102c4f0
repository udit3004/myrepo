{"_id":"commands-events","_rev":"16-cb5b77daa55a7b82f63dc17aee2fe0ee","name":"commands-events","description":"commands-events provides commands and events for DDD-based applications.","dist-tags":{"latest":"1.0.4"},"versions":{"1.0.0":{"name":"commands-events","version":"1.0.0","description":"commands-events provides commands and events for DDD-based applications.","contributors":[{"name":"Golo Roden","email":"golo.roden@thenativeweb.io"},{"name":"Matthias Wagler","email":"matthias.wagler@thenativeweb.io"}],"main":"dist/index.js","dependencies":{"formats":"0.5.5","uuidv4":"0.5.0"},"devDependencies":{"assertthat":"0.9.0","roboter":"0.15.2","roboter-server":"0.15.2"},"repository":{"type":"git","url":"git://github.com/thenativeweb/commands-events.git"},"keywords":["cqrs","ddd","wolkenkit"],"license":"AGPL-3.0","gitHead":"9c074f67d24807686d2943eb8805cf8feaa502b6","bugs":{"url":"https://github.com/thenativeweb/commands-events/issues"},"homepage":"https://github.com/thenativeweb/commands-events#readme","_id":"commands-events@1.0.0","_npmVersion":"5.0.3","_nodeVersion":"6.10.0","_npmUser":{"name":"goloroden","email":"webmaster@goloroden.de"},"dist":{"integrity":"sha512-WyfBOl/EnS09pRsacrBV40TjQ8qyZvKZZpxlmwZzDrin8S31o2Gt7KSjUs7u3aoqn3w3BmNKG1XBAYsDq5tb6A==","shasum":"1bad92d19366b41bcdf11c1e52a57fa60d038456","tarball":"https://registry.npmjs.org/commands-events/-/commands-events-1.0.0.tgz","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBu2834KU4tTvpKD2IH4BiuIFxdC5Z5zBpgJsyzXCmblAiEAyjFYVX+79LHJmMVF3m5H/y1REpW1gc3XZVno5VzpDwI="}]},"maintainers":[{"name":"goloroden","email":"webmaster@goloroden.de"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/commands-events-1.0.0.tgz_1497521819022_0.10583173972554505"},"directories":{}},"1.0.1":{"name":"commands-events","version":"1.0.1","description":"commands-events provides commands and events for DDD-based applications.","contributors":[{"name":"Golo Roden","email":"golo.roden@thenativeweb.io"},{"name":"Matthias Wagler","email":"matthias.wagler@thenativeweb.io"}],"main":"dist/index.js","dependencies":{"formats":"1.0.0","uuidv4":"1.0.0"},"devDependencies":{"assertthat":"1.0.0","roboter":"0.15.6","roboter-server":"0.15.6"},"repository":{"type":"git","url":"git://github.com/thenativeweb/commands-events.git"},"keywords":["cqrs","ddd","wolkenkit"],"license":"AGPL-3.0","gitHead":"d2d8c0052a2413d82c40d8ed98781ea166bcf8c7","bugs":{"url":"https://github.com/thenativeweb/commands-events/issues"},"homepage":"https://github.com/thenativeweb/commands-events#readme","_id":"commands-events@1.0.1","_npmVersion":"5.6.0","_nodeVersion":"8.9.4","_npmUser":{"name":"goloroden","email":"webmaster@goloroden.de"},"dist":{"integrity":"sha512-FbvaTUWDbL1fGGdf7ClmsN8TBUlrdI8D78RcsXgy2P28MmWsg8DySKY03eoPDVkPB9EojeJ9SCGZ2v2n1SQx9A==","shasum":"8513c9d48bc2caeba18c64dce946f85fc4d8d668","tarball":"https://registry.npmjs.org/commands-events/-/commands-events-1.0.1.tgz","fileCount":13,"unpackedSize":115540,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIBF6IJFQtQp56tNknVGV/P8EmLIegZG1NLa0egajn/b0AiAUsNcTZ2bBqBSUdGtVt9ONKDMQr3Du7F2WV+f7kR6ORQ=="}]},"maintainers":[{"email":"webmaster@goloroden.de","name":"goloroden"},{"email":"jan-hendrik.grundhoefer@thenativeweb.io","name":"grundhoeferj"},{"email":"wagler@intuity.de","name":"mattwagl"},{"email":"hello@thenativeweb.io","name":"thenativeweb-admin"}],"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/commands-events_1.0.1_1518124334521_0.567536880558065"},"_hasShrinkwrap":false},"1.0.2":{"name":"commands-events","version":"1.0.2","description":"commands-events provides commands and events for DDD-based applications.","contributors":[{"name":"Golo Roden","email":"golo.roden@thenativeweb.io"},{"name":"Matthias Wagler","email":"matthias.wagler@thenativeweb.io"}],"main":"dist/index.js","dependencies":{"formats":"1.0.0","uuidv4":"1.0.0"},"devDependencies":{"assertthat":"1.0.0","roboter":"1.0.4"},"repository":{"type":"git","url":"git://github.com/thenativeweb/commands-events.git"},"keywords":["cqrs","ddd","wolkenkit"],"license":"AGPL-3.0","gitHead":"42e133c32d337339ecc7aff8eb18786ad9cdb45e","bugs":{"url":"https://github.com/thenativeweb/commands-events/issues"},"homepage":"https://github.com/thenativeweb/commands-events#readme","_id":"commands-events@1.0.2","_npmVersion":"6.1.0","_nodeVersion":"8.11.1","_npmUser":{"name":"goloroden","email":"webmaster@goloroden.de"},"dist":{"integrity":"sha512-hMQpX/2uFcLNUZBef9D384W9VKIz4RoH09fk9gEUwyL21XnXMwVlFQs7ca5VqDOLI5duX2TW77pEaZZl7vli+w==","shasum":"f91d513c624a8bfe77212943a48a9963e5af6526","tarball":"https://registry.npmjs.org/commands-events/-/commands-events-1.0.2.tgz","fileCount":12,"unpackedSize":116756,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJbHBRUCRA9TVsSAnZWagAAV2MP/jYeTh8LRaC8g/IrSQ3k\n+6qcQe5I254k+VejnTNYe1GDtciAgrXnYyWWSMo3lHrv524MP5BHUKAnv29i\no0PJo7uY/KlsGjZ9nV166liSdxUdtmpsFGSZNaD+9ExFezC0DX422Q8hC7Pk\nkobKoKf97BlziS2KctlyTKM97VMvxu9UreChNHozKD5ktnZGKlLdXrOEC66Z\nWye8G7YOKAyb1Y6fhwkvVSqNnUTpEH68EstfmfzI4urfZO8sQWyX5XMp/lcH\nJf3Uwr3LEvXx90se0Rekt7pAPu5uLhx5/oHypjoB6FOT91yhQ3uIa5GHSHBU\n9M3HVClfrzWY6fypKXsI/uSdbHgl9dSLQxrA78TtwJ9JLYvkj/i7u+nb0sCm\nkbmf5BnOJBU8TwkzhJSOoAU1K/zXNRSvLnjprXO8vvHVGw6j8eaySMOQDMWN\nxjsBU7g8HH25RGGFlwU238Y/u9sVUHtbhn7Khnm3R4HwKLAAQg+nCU/CQ4uE\n6AoR27xj8xc2QfioBJ78n3tn3puJIhOhfoHsuAaHT250PzDVaBwOZ3k19mu1\nUp3zZhtWcDWYklRegmriubKmdjWcGNCiHOaGM1ZASKxulgafF8nM4KPXWDwl\n32vWNVIGe3E4y67sMCrW2uRaDv0nriivshZoyL+lkxp14GkvH7Vec4/L5Fpc\noj6N\r\n=+ij0\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCID8QgbYCpxvdc6HT6QC2/tI5d8O8nhHJYfketEVIMIKcAiEA+K0AxuKkzA9QXaoHzqZDgpzIz5Xz+q2AM1nXJrhkWr8="}]},"maintainers":[{"email":"webmaster@goloroden.de","name":"goloroden"},{"email":"jan-hendrik.grundhoefer@thenativeweb.io","name":"grundhoeferj"},{"email":"wagler@intuity.de","name":"mattwagl"},{"email":"hello@thenativeweb.io","name":"thenativeweb-admin"}],"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/commands-events_1.0.2_1528566867033_0.5106811714425219"},"_hasShrinkwrap":false},"1.0.3":{"name":"commands-events","version":"1.0.3","description":"commands-events provides commands and events for DDD-based applications.","contributors":[{"name":"Golo Roden","email":"golo.roden@thenativeweb.io"},{"name":"Matthias Wagler","email":"matthias.wagler@thenativeweb.io"}],"main":"dist/index.js","dependencies":{"formats":"1.0.0","uuidv4":"1.0.1"},"devDependencies":{"assertthat":"1.0.0","roboter":"1.0.4"},"repository":{"type":"git","url":"git://github.com/thenativeweb/commands-events.git"},"keywords":["cqrs","ddd","wolkenkit"],"license":"AGPL-3.0","gitHead":"9ec824df1542c1c024984225beb0c84015e58351","bugs":{"url":"https://github.com/thenativeweb/commands-events/issues"},"homepage":"https://github.com/thenativeweb/commands-events#readme","_id":"commands-events@1.0.3","_npmVersion":"5.6.0","_nodeVersion":"8.11.2","_npmUser":{"name":"goloroden","email":"webmaster@goloroden.de"},"dist":{"integrity":"sha512-8+bvRwn33Sb8UrybOZgev6gJEr1D5gneqUY0hd3VVwtgH3dqLqIguzjVxnZW0KxPg57wDXy8qoCj1BMjn6P/Jg==","shasum":"da81e555b1c9f6969eb320569671a3f749d4583a","tarball":"https://registry.npmjs.org/commands-events/-/commands-events-1.0.3.tgz","fileCount":12,"unpackedSize":116756,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJbIjN4CRA9TVsSAnZWagAAINEQAJY1PpUjPFDG+QOnovF4\nU6/UPYazU8h4nPIp1oNuA2ulKYah7sss9UW4SaQE+s3eqU7+huJjWddX5EL0\n2X11PVk+kLVyVKuHS2qsp2r4YSkE2JfRbuzlggPUzpiOl5iuQXQHANHJyq3C\ntSdIu9QjOGGMt10vCZX+shhutViLLVv3e5tWQQi4CSKXsR6RwjlLnWFzYlub\nUUq4jWzIoFGgl3mzng42QHlMbcVpPcRA2LuZd3r4AmVknSTJ9FUCjVQU953X\n6DOvXbCVs5472BDM4kkPP92iRveAJEdguKdEZpkESdZE8tk6wPOQ8WKAbKa1\nC+NmrkJ/xnvNECYazLgKgK9+snbsjf+8wLE11EKdGL+fMy8bSM1/8DwLpy2X\nA1wOzT/54nIXUECVAvbozNbYs0VPKVSf0+p7jUZyNp8wl0qcUPiPW5sP361t\nW9ZW0aJCuyva31xgC1OB1aGJbmqYS6d5Yn6VBhMDtzmgsatILBL2rEbSvPYa\nvjQr2IyauyyLzF9Pq2ZeO/WJj6RWZe1+sMv6a3Z+xAKvuiX0Tj7rp3fed/dG\nX66p8OL2k/1LfVAOTL7mBIi85hoNJ9PTxLnPCENGdqAhl7GAh0EhpAgp2udW\nZeS5aQNG58p3H0d1lUakXzHwrTWYBFK1PcpxMbMtuBxhsPCfItA7HFux86EN\ngDAf\r\n=1E3Z\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBZG+r2TSBT6igzFh7jZWI4w0lag6SpAozM71681jepLAiEA1EfMFgH3LR1fCY4w5j/pZut3W9ESK6trA9FbZzw6E+w="}]},"maintainers":[{"email":"webmaster@goloroden.de","name":"goloroden"},{"email":"jan-hendrik.grundhoefer@thenativeweb.io","name":"grundhoeferj"},{"email":"wagler@intuity.de","name":"mattwagl"},{"email":"hello@thenativeweb.io","name":"thenativeweb-admin"}],"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/commands-events_1.0.3_1528968055112_0.573441669458103"},"_hasShrinkwrap":false},"1.0.4":{"name":"commands-events","version":"1.0.4","description":"commands-events provides commands and events for DDD-based applications.","contributors":[{"name":"Golo Roden","email":"golo.roden@thenativeweb.io"},{"name":"Matthias Wagler","email":"matthias.wagler@thenativeweb.io"}],"main":"dist/index.js","dependencies":{"@babel/runtime":"7.2.0","formats":"1.0.0","uuidv4":"2.0.0"},"devDependencies":{"assertthat":"2.0.1","roboter":"3.0.3"},"repository":{"type":"git","url":"git://github.com/thenativeweb/commands-events.git"},"keywords":["cqrs","ddd","wolkenkit"],"license":"AGPL-3.0","gitHead":"85998693ff9a00d7db5b7f0225f5797f26cca5fa","bugs":{"url":"https://github.com/thenativeweb/commands-events/issues"},"homepage":"https://github.com/thenativeweb/commands-events#readme","_id":"commands-events@1.0.4","_npmVersion":"6.4.1","_nodeVersion":"10.13.0","_npmUser":{"name":"goloroden","email":"webmaster@goloroden.de"},"dist":{"integrity":"sha512-HdP/+1Anoc7z+6L2h7nd4Imz54+LW+BjMGt30riBZrZ3ZeP/8el93wD8Jj8ltAaqVslqNgjX6qlhSBJwuDSmpg==","shasum":"772123d7f175b2984474bce37a722f4c2d3d2830","tarball":"https://registry.npmjs.org/commands-events/-/commands-events-1.0.4.tgz","fileCount":12,"unpackedSize":117124,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJcNQJ3CRA9TVsSAnZWagAA63YP/jjFIqV2XC7Kp/meDee8\ni2rPVq9+PYKaqSlibHBVtdyCH4IKQ7jdRmVVJnCnodVaIZtV+bJRCot9vqam\nCce0dvCZPI9qfjnPnAbNvS2oSX8sdBJVVswM7pCQFVwVlikncaEAdsNnuOCW\nHL2jOQGNNMNqqv1dQsKxCYu9OpX2+s6awIVKOodz2ZDwWZHnT+T1jMIenh1N\nq3SHXhGn/WBmoy3N7ereYpA7L3tFDhNESSi2EHVID4l9CEkzvkVKBRyDPMTS\nycvoGSR2Rrg4m+kIoSPVjQaBpf8aUuwadP7WskMhKTbhm1JRiZS34NjIhp4U\nCa8l69A4GjyQppIRaP1n5sYfcjhy7+gZSgmn+qgmegOKaQObcVSxdOkn+eQs\nTJWsB1S4IfKmIRMzC6NPVEYln5fOzZQpzYTvHa2Z7bMd9Da3/YMuKdICbZAt\nQBkeljW25CKf8DVuuu964dOh6tQnXXfeLGa8f7XtCo2Kdh+Qo/XumjY1w15Y\ntgpV9JVdmmQIzLlsPuSoe/JQHIweVRGiyKAIV4XmydDFlkkenj6zPEHJdgDK\nN4RtSWpyvNWguyVA+kpEAlXS6O19Z0zycc8yLtWpyV5SvcHUolbGHXcYEAFy\nHecgj3kMPwLF3sAIubGOC8Rsy2RE8KbvYa4L1t5feRN29gDvps2k3r3iRL9m\nQGGc\r\n=BWll\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFpnJ1a6WJ5rTTQJouX1CkSjJZAlZ3c73NRlmvdJEG3kAiB3CCall1YNOywfNS9kKPZnORJjUZKx3juD+YlmB8xkBA=="}]},"maintainers":[{"email":"webmaster@goloroden.de","name":"goloroden"},{"email":"jan-hendrik.grundhoefer@thenativeweb.io","name":"grundhoeferj"},{"email":"wagler@intuity.de","name":"mattwagl"},{"email":"hello@thenativeweb.io","name":"thenativeweb-admin"}],"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/commands-events_1.0.4_1546977910778_0.6086429516416345"},"_hasShrinkwrap":false}},"readme":"# commands-events\n\ncommands-events provides commands and events for DDD-based applications.\n\n## Installation\n\n```shell\n$ npm install commands-events\n```\n\n## Quick start\n\nFirst, you need to add a reference to the commands-events module. Since you will use its `Command` and `Event` constructor functions, it's most probably a good idea to reference them directly.\n\n```javascript\nconst { Command, Event } = require('commands-events');\n```\n\n## Using commands\n\n### Creating commands\n\nIf you need to create a command, call the `Command` constructor function and provide the appropriate parameters.\n\n```javascript\nconst command = new Command({\n  context: {\n    name: 'network'\n  },\n  aggregate: {\n    name: 'node',\n    id: '85932442-bf87-472d-8b5a-b0eac3aa8be9'\n  },\n  name: 'ping'\n});\n```\n\nMost of the times, you will want to attach data to the command. For that provide a `data` property when creating the command. If you omit the `data` property, it will be set to an empty object.\n\n```javascript\nconst command = new Command({\n  context: {\n    name: 'network'\n  },\n  aggregate: {\n    name: 'node',\n    id: '85932442-bf87-472d-8b5a-b0eac3aa8be9'\n  },\n  name: 'ping',\n  data: {\n    ttl: 10 * 1000\n  }\n});\n```\n\nIf, additionally, you need to add metadata to the command, specify its `custom` property. If you omit the `custom` property, it will also be set to an empty object.\n\n```javascript\nconst command = new Command({\n  context: {\n    name: 'network'\n  },\n  aggregate: {\n    name: 'node',\n    id: '85932442-bf87-472d-8b5a-b0eac3aa8be9'\n  },\n  name: 'ping',\n  data: {\n    ttl: 10 * 1000\n  },\n  custom: {\n    sourceIp: '127.0.0.1'\n  }\n});\n```\n\nIn any case, the result is an object with an additional `metadata` property.\n\n```javascript\n{\n  context: {\n    name: 'network'\n  },\n  aggregate: {\n    name: 'node',\n    id: '85932442-bf87-472d-8b5a-b0eac3aa8be9'\n  },\n  name: 'ping',\n  id: '4784bce1-4b7b-45a0-87e4-3058303194e6',\n  data: {\n    ttl: 10000\n  },\n  custom: {\n    sourceIp: '127.0.0.1'\n  },\n  user: null,\n  metadata: {\n    timestamp: 1421260133331,\n    correlationId: '4784bce1-4b7b-45a0-87e4-3058303194e6',\n    causationId: '4784bce1-4b7b-45a0-87e4-3058303194e6'\n  }\n}\n```\n\n### Adding a token to a command\n\nTo add a JWT token to a command, e.g. to indicate which user caused it, call the `addToken` function and hand over the token.\n\n```javascript\nconst token = getJwt();\n\ncommand.addToken(token);\n```\n\nThen you can access the user's id (which is identical to the `sub` claim) by using the `command.user.id` property. If you want to access the entire token use `command.user.token`.\n\nPlease note that until you provide a token, the command's `user` property will be `null`.\n\n### Handling deserialized commands\n\nIf you serialize and deserialize a command, all its data is kept, but its constructor and prototype are lost. To recreate them, use the `wrap` function.\n\n```javascript\nconst command = Command.wrap(deserializedCommand);\n```\n\n## Using events\n\n### Creating events\n\nIf you need to create an event, call the `Event` constructor function and provide the appropriate parameters.\n\n```javascript\nconst event = new Event({\n  context: {\n    name: 'network'\n  },\n  aggregate: {\n    name: 'node',\n    id: '85932442-bf87-472d-8b5a-b0eac3aa8be9'\n  },\n  name: 'pinged',\n  metadata: {\n    correlationId: '13505cab-0ca2-4502-b8c9-8f3ce63ae390',\n    causationId: '124885f3-d35e-43a6-84eb-e28c70b5be66'\n  }\n});\n```\n\nIf you want to attach data to the event, specify its `data` property. If you omit the `data` property, it will be set to an empty object.\n\n```javascript\nconst event = new Event({\n  context: {\n    name: 'network'\n  },\n  aggregate: {\n    name: 'node',\n    id: '85932442-bf87-472d-8b5a-b0eac3aa8be9'\n  },\n  name: 'pinged',\n  data: {\n    ttl: 10 * 1000\n  },\n  metadata: {\n    correlationId: '13505cab-0ca2-4502-b8c9-8f3ce63ae390',\n    causationId: '124885f3-d35e-43a6-84eb-e28c70b5be66'\n  }\n});\n```\n\nBy default, an event will always be a `domain` event. For other types of events, specify the event's `type` property.\n\n```javascript\nconst event = new Event({\n  context: {\n    name: 'network'\n  },\n  aggregate: {\n    name: 'node',\n    id: '85932442-bf87-472d-8b5a-b0eac3aa8be9'\n  },\n  name: 'pingFailed',\n  type: 'error',\n  data: {\n    ttl: 10 * 1000\n  },\n  metadata: {\n    correlationId: '13505cab-0ca2-4502-b8c9-8f3ce63ae390',\n    causationId: '124885f3-d35e-43a6-84eb-e28c70b5be66'\n  }\n});\n```\n\nIf, additionally, you need to add metadata to the event, specify its `custom` property. If you omit the `custom` property, it will also be set to an empty object.\n\n```javascript\nconst event = new Event({\n  context: {\n    name: 'network'\n  },\n  aggregate: {\n    name: 'node',\n    id: '85932442-bf87-472d-8b5a-b0eac3aa8be9'\n  },\n  name: 'pinged',\n  data: {\n    ttl: 10 * 1000\n  },\n  custom: {\n    sourceIp: '127.0.0.1'\n  },\n  metadata: {\n    correlationId: '13505cab-0ca2-4502-b8c9-8f3ce63ae390',\n    causationId: '124885f3-d35e-43a6-84eb-e28c70b5be66'\n  }\n});\n```\n\nIn any case, the result is an object with the following structure.\n\n```javascript\n{\n  context: {\n    name: 'network'\n  },\n  aggregate: {\n    name: 'node',\n    id: '85932442-bf87-472d-8b5a-b0eac3aa8be9'\n  },\n  name: 'pinged',\n  type: 'domain',\n  data: {\n    ttl: 10000\n  },\n  metadata: {\n    timestamp: 1421261012560,\n    published: false,\n    correlationId: '13505cab-0ca2-4502-b8c9-8f3ce63ae390',\n    causationId: '124885f3-d35e-43a6-84eb-e28c70b5be66'\n  }\n}\n```\n\n### Adding authorization metadata\n\nYou might want to add authorization metadata to an event in order to specify clearly who is allowed to read this event. Use the `metadata.isAuthorized` property and make sure to set the `owner`, `forAuthenticated` and `forPublic` properties.\n\n```javascript\nconst event = new Event({\n  // ...\n  metadata: {\n    correlationId: '13505cab-0ca2-4502-b8c9-8f3ce63ae390',\n    causationId: '124885f3-d35e-43a6-84eb-e28c70b5be66'\n    isAuthorized: {\n      owner: 'a7e2a714-17f0-45e4-9693-6e3a472cc3d9',\n      forAuthenticated: true,\n      forPublic: false\n    }\n  }\n});\n```\n\n### Adding a user to an event\n\nTo add a user to an event, e.g. to indicate which user caused it, call the `addUser` function and hand over the user. The user may be taken from a command, e.g. with `command.user`. It must contain an `id`.\n\n```javascript\nevent.addUser(command.user);\n```\n\nThen you can access the user's id by using the `event.user.id` property.\n\nPlease note that until you provide a user, the event's `user` property will be `null`.\n\n### Handling deserialized events\n\nIf you serialize and deserialize an event, all its data is kept, but its constructor and prototype are lost. To recreate them, use the `wrap` function.\n\n```javascript\nconst event = Event.wrap(deserializedEvent);\n```\n\n## Manually creating commands and events\n\nIf, for whatever reason, you need to create a command or event manually, i.e. without the help of the constructor functions, you may use the `Command.isWellformed` and `Event.isWellformed` functions to verify whether the created object has the correct format.\n\n```javascript\nconst command = { /* ... */ },\n      event = { /* ... */ };\n\nconsole.log(Command.isWellformed(command)); // => true\nconsole.log(Event.isWellformed(event));     // => true\n```\n\n## Relations between commands and events\n\nEach command and each event is identified by a unique id. It is automatically set whenever you create a new command or event, and it is accessible using the `id` property.\n\nSince each event is caused by a command, you may want to find out by which command a given event was caused. You can do so using the event's `metadata.causationId` property which contains the causing command's `id`. The same is true for commands that were caused by an event, e.g. within a flow.\n\nAll commands and events that arise from an originating command additionally have a common id, the so-called `metadata.correlationId`. You can use this id to gather all commands and events that deal with a long-running transaction and belong together.\n\n## Running the build\n\nTo build this module use [roboter](https://www.npmjs.com/package/roboter).\n\n```shell\n$ npx roboter\n```\n\n## License\n\nCopyright (c) 2014-2018 the native web.\n\nThis program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nThis program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details.\n\nYou should have received a copy of the GNU Affero General Public License along with this program. If not, see [GNU Licenses](http://www.gnu.org/licenses/).\n","maintainers":[{"email":"hello@thenativeweb.io","name":"thenativeweb-admin"},{"email":"golo.roden@thenativeweb.io","name":"goloroden"}],"time":{"modified":"2024-02-05T05:12:08.089Z","created":"2017-06-15T10:17:00.150Z","1.0.0":"2017-06-15T10:17:00.150Z","1.0.1":"2018-02-08T21:12:15.661Z","1.0.2":"2018-06-09T17:54:27.154Z","1.0.3":"2018-06-14T09:20:55.170Z","1.0.4":"2019-01-08T20:05:10.912Z"},"homepage":"https://github.com/thenativeweb/commands-events#readme","keywords":["cqrs","ddd","wolkenkit"],"repository":{"type":"git","url":"git://github.com/thenativeweb/commands-events.git"},"contributors":[{"name":"Golo Roden","email":"golo.roden@thenativeweb.io"},{"name":"Matthias Wagler","email":"matthias.wagler@thenativeweb.io"}],"bugs":{"url":"https://github.com/thenativeweb/commands-events/issues"},"license":"AGPL-3.0","readmeFilename":"README.md"}